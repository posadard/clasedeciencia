/*
 * Clase de Ciencia - Stylesheet Principal
 * Diseño educativo científico con paleta azul institucional
 * Paleta: Azul profundo (confianza), Verde científico (crecimiento), Amarillo (curiosidad)
 */

/* === CSS Variables === */
:root {
    /* Colores Principales - Azul Científico */
    --color-primary: #1f3c88;        /* Azul profundo (confianza y conocimiento) */
    --color-primary-light: #3d5ba9;  /* Azul medio */
    --color-primary-dark: #152a5e;   /* Azul muy oscuro */
    
    /* Colores Secundarios - Verde Aprendizaje */
    --color-secondary: #2e7d32;      /* Verde científico (crecimiento) */
    --color-secondary-light: #4caf50;/* Verde claro */
    --color-secondary-dark: #1b5e20; /* Verde oscuro */
    
    /* Colores de Acento - Amarillo Curiosidad */
    --color-accent: #f9a825;         /* Amarillo suave (curiosidad y descubrimiento) */
    --color-accent-light: #ffc107;   /* Amarillo brillante */
    --color-accent-dark: #f57f17;    /* Amarillo oscuro */
    
    /* Estados y Utilidades */
    --color-success: #2e7d32;        /* Verde - confirmación */
    --color-warning: #f9a825;        /* Amarillo - advertencia */
    --color-error: #d32f2f;          /* Rojo - error */
    --color-info: #1976d2;           /* Azul claro - información */
    
    /* Texto */
    --color-text: #2b2b2b;           /* Gris oscuro profesional */
    --color-text-light: #5f6368;     /* Gris medio */
    --color-text-muted: #80868b;     /* Gris claro */
    
    /* Fondos */
    --color-bg: #ffffff;             /* Blanco puro */
    --color-bg-alt: #f4f6f8;         /* Gris muy claro */
    --color-bg-light: #e8eaf0;       /* Gris claro */
    --color-bg-dark: #d4d8dd;        /* Gris medio */
    
    /* Bordes */
    --color-border: #d4d8dd;         /* Gris suave */
    --color-border-light: #e8eaf0;   /* Muy claro */
    
    /* Fonts - Sistema tipográfico moderno */
    --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-heading: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'SF Mono', 'Monaco', 'Cascadia Code', 'Courier New', monospace;
    
    /* Spacing */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 0.75rem;
    --spacing-lg: 1rem;
    --spacing-xl: 1.5rem;
    --spacing-2xl: 2rem;
    
    /* Layout */
    --max-width: 1400px;
    --max-width-narrow: 800px;
    --border-radius: 8px;
    --border-radius-sm: 4px;
    
    /* Shadows */
    --shadow-sm: 0 1px 3px rgba(31, 60, 136, 0.1);
    --shadow-md: 0 4px 6px rgba(31, 60, 136, 0.1);
    --shadow-lg: 0 10px 15px rgba(31, 60, 136, 0.15);
}

/* === Reset & Base === */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 15px;
    line-height: 1.5;
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-body);
    color: var(--color-text);
    background-color: var(--color-bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Vintage subtle paper texture (light, non-intrusive) */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    background-image: radial-gradient(rgba(31, 60, 136, 0.01) 1px, transparent 1px);
    background-size: 40px 40px;
    opacity: 0.03;
    z-index: 0;
}

/* === Typography === */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    line-height: 1.2;
    margin-bottom: var(--spacing-sm);
    font-weight: 700;
    color: var(--color-primary);
}

h1 { font-size: 1.75rem; letter-spacing: -0.02em; }
h2 { font-size: 1.5rem; letter-spacing: -0.01em; }
h3 { font-size: 1.125rem; }
h4 { font-size: 1.25rem; }
h5 { font-size: 1rem; }
h6 { font-size: 0.875rem; }

p {
    margin-bottom: var(--spacing-md);
    line-height: 1.55;
}

a {
    color: var(--color-primary);
    text-decoration: none;
    transition: color 0.2s ease, border-color 0.2s ease;
    border-bottom: 1px solid transparent;
}

a:hover {
    color: var(--color-primary-light);
    border-bottom-color: var(--color-accent);
}

strong, b {
    font-weight: 600;
    color: var(--color-primary);
}

/* === Layout === */
.container {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--spacing-sm);
}

.container-narrow {
    max-width: var(--max-width-narrow);
    margin: 0 auto;
    padding: 0 var(--spacing-md);
}

/* === Header === */
.site-header {
    background: var(--color-primary);
    color: white;
    padding: var(--spacing-md) 0.5rem;
    margin-bottom: var(--spacing-lg);
    border-bottom: 4px solid var(--color-accent);
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--spacing-md);
}

.site-title {
    font-size: 2rem;
    /* Amarillo curiosidad para destacar el título */
    color: var(--color-accent);
    text-decoration: none;
    font-weight: 500;
    letter-spacing: -0.02em;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    border: none;
    text-shadow: 0 1px 0 rgba(0,0,0,0.18);
}

.site-title:hover {
    color: var(--color-accent-light);
    border: none;
}

/* Ensure the anchor inside the site title uses the intended color (overrides global a{} rule) */
.site-title a {
    color: var(--color-accent);
    text-decoration: none;
    border: none;
}

.site-title:hover a {
    color: var(--color-accent-light);
}

.site-title a:focus {
    outline: 2px solid rgba(74,124,89,0.18);
    outline-offset: 3px;
}

.site-title::before {
    content: ""; /* icon moved to inline SVG in header for consistent rendering */
}

.site-tagline {
    font-size: 0.9rem;
    color: var(--color-accent-light);
    font-style: italic;
    margin-top: 0.25rem;
}

/* === Navigation === */
.main-nav ul {
    list-style: none;
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.main-nav a {
    color: white;
    font-weight: 500;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.main-nav a:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--color-accent);
    color: white;
}

/* === Hero Section === */
.hero {
    background: linear-gradient(135deg, var(--color-bg-light) 0%, var(--color-bg-alt) 100%);
    padding: var(--spacing-lg) 0.5rem;
    margin-bottom: var(--spacing-md);
    border-radius: 4px;
    border: 1px solid var(--color-border-light);
    text-align: center; /* ensure hero title and content are centered */
}

/* === Header Search Container (Siempre visible) === */
.header-search-container {
    padding: 1rem 0;
    border-top: 1px solid #e8eef5;
}

.search-box {
    max-width: 720px;
    margin: 0 auto;
    position: relative;
    padding: 0 1rem; /* Padding lateral para mobile */
}

.search-form {
    position: relative;
    width: 100%;
}

.search-icon {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-text-light);
    pointer-events: none;
    z-index: 1;
}

.search-input {
    width: 100%;
    padding: 1rem 1.5rem 1rem 3.25rem;
    font-size: 1rem;
    border: 2px solid rgba(31, 60, 136, 0.15);
    border-radius: 50px;
    background: white;
    transition: all 0.3s ease;
    font-family: inherit;
    color: var(--color-text);
}

.search-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px rgba(31, 60, 136, 0.08);
}

.search-input::placeholder {
    color: var(--color-text-light);
}

@media (max-width: 768px) {
    .header-search-container {
        padding: 0.75rem 0;
    }
    
    .search-box {
        max-width: 100%;
        padding: 0 0.75rem;
    }
    
    .search-input {
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        font-size: 0.875rem;
        border-radius: 25px;
    }
    
    .search-icon {
        left: 14px;
        width: 16px;
        height: 16px;
    }
    
    .search-input::placeholder {
        font-size: 0.8125rem;
    }
}

.hero h1,
.hero h2 {
    font-size: 3rem;
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
    text-align: center;
}

.hero p,
.hero-subtitle {
    font-size: 1.25rem;
    color: var(--color-text-light);
    max-width: 700px;
    margin: 0 auto var(--spacing-md);
}

.hero-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
    flex-wrap: wrap;
    margin-top: var(--spacing-md);
}

/* === Buttons === */
.btn {
    display: inline-block;
    padding: 0.4rem 0.75rem;
    background: var(--color-primary);
    color: white;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    transition: all 0.12s ease;
    border: 1px solid var(--color-primary);
    cursor: pointer;
    font-size: 0.95rem;
}

.btn:hover {
    background: var(--color-primary-light);
    border-color: var(--color-primary-light);
    color: white;
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn-primary {
    background-color: var(--color-primary);
    color: var(--color-bg);
}

.btn-primary:hover {
    background: var(--color-primary-light);
}

.btn-secondary,
.btn-large {
    background: white;
    color: var(--color-primary);
    border-color: var(--color-border);
    padding: var(--spacing-sm) var(--spacing-lg);
    font-size: 1.1rem;
}

.btn-secondary:hover,
.btn-large:hover {
    background: var(--color-bg-alt);
    border-color: var(--color-accent);
    color: var(--color-primary);
    transform: translateY(-1px);
}

.btn-accent {
    background: var(--color-accent);
    border-color: var(--color-accent);
}

.btn-accent:hover {
    background: var(--color-accent-light);
    border-color: var(--color-accent-light);
}

/* === Grids === */
.articles-grid,
.sections-grid {
    display: grid;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
}

.articles-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
}

.sections-grid {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-md);
}

/* Cards de Ciclos Educativos - Diseño Mejorado */
.ciclos-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 1.25rem;
    margin-top: 2rem;
}

.ciclo-card {
    background: white;
    border-radius: 12px;
    padding: 2rem 1.5rem;
    text-align: center;
    box-shadow: 0 2px 8px rgba(31, 60, 136, 0.08);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    position: relative;
    overflow: hidden;
}

.ciclo-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 30px rgba(31, 60, 136, 0.15);
}

/* Icono circular con número de ciclo */
.ciclo-icon {
    width: 4.5rem;
    height: 4.5rem;
    margin: 0 auto;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.75rem;
    font-weight: 700;
    color: white;
    position: relative;
    overflow: hidden;
}

/* Gradientes específicos por ciclo - Gradación perfectamente distribuida Verde → Naranja */
.ciclo-icon.ciclo-0 { 
    background: linear-gradient(135deg, #9e9e9e, #757575);
    animation: madurar-0 4s ease-in-out infinite;
    animation-delay: 0.5s;
}
.ciclo-icon.ciclo-1 { 
    background: linear-gradient(135deg, #2e7d32, #1b5e20);
    animation: madurar-1 4s ease-in-out infinite;
    animation-delay: 0s;
}
.ciclo-icon.ciclo-2 { 
    background: linear-gradient(135deg, #798619, #5a6610);
    animation: madurar-2 4s ease-in-out infinite;
    animation-delay: 1.2s;
}
.ciclo-icon.ciclo-3 { 
    background: linear-gradient(135deg, #c49000, #9a6e00);
    animation: madurar-3 4s ease-in-out infinite;
    animation-delay: 2.5s;
}
.ciclo-icon.ciclo-4 { 
    background: linear-gradient(135deg, #dc8600, #c05f00);
    animation: madurar-4 4s ease-in-out infinite;
    animation-delay: 1.8s;
}
.ciclo-icon.ciclo-5 { 
    background: linear-gradient(135deg, #f57c00, #e65100);
    animation: madurar-5 4s ease-in-out infinite;
    animation-delay: 0.7s;
}

/* Animaciones de maduración - cada ciclo "respira" hacia tonos más brillantes */
@keyframes madurar-0 {
    0%, 100% { background: linear-gradient(135deg, #9e9e9e, #757575); }
    50% { background: linear-gradient(135deg, #bdbdbd, #9e9e9e); }
}
@keyframes madurar-1 {
    0%, 100% { background: linear-gradient(135deg, #2e7d32, #1b5e20); }
    50% { background: linear-gradient(135deg, #43a047, #2e7d32); }
}
@keyframes madurar-2 {
    0%, 100% { background: linear-gradient(135deg, #798619, #5a6610); }
    50% { background: linear-gradient(135deg, #9ccc65, #7cb342); }
}
@keyframes madurar-3 {
    0%, 100% { background: linear-gradient(135deg, #c49000, #9a6e00); }
    50% { background: linear-gradient(135deg, #ffca28, #ffa000); }
}
@keyframes madurar-4 {
    0%, 100% { background: linear-gradient(135deg, #dc8600, #c05f00); }
    50% { background: linear-gradient(135deg, #ffa726, #fb8c00); }
}
@keyframes madurar-5 {
    0%, 100% { background: linear-gradient(135deg, #f57c00, #e65100); }
    50% { background: linear-gradient(135deg, #ff9800, #f57c00); }
}

/* Efecto shine en hover */
.ciclo-icon::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
    transform: rotate(45deg);
}

.ciclo-card:hover .ciclo-icon::after {
    animation: shine 0.8s ease-out;
}

@keyframes shine {
    from { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    to { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* Jerarquía de texto */
.ciclo-header {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.ciclo-nombre {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-primary);
    margin: 0;
    line-height: 1.3;
}

.ciclo-grados {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-accent);
    margin: 0;
}

.ciclo-edad {
    font-size: 0.85rem;
    color: var(--color-text-muted);
    font-weight: 500;
}

.ciclo-proposito {
    font-size: 0.9rem;
    line-height: 1.55;
    color: var(--color-text-light);
    margin: 0;
    flex-grow: 1;
    text-align: center;
}

/* Badges de metadata */
.ciclo-meta {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    flex-wrap: wrap;
    min-height: 1.75rem;
}

.badge {
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    white-space: nowrap;
}

.badge-nivel {
    background: rgba(31, 60, 136, 0.1);
    color: var(--color-primary);
}

.badge-isced {
    background: rgba(46, 125, 50, 0.1);
    color: var(--color-secondary);
}

.badge-destacado {
    background: linear-gradient(135deg, #f9a825 0%, #f57c00 100%);
    color: white;
    font-weight: 700;
    box-shadow: 0 2px 4px rgba(249, 168, 37, 0.3);
    text-transform: none;
    font-size: 1rem;
    padding: 0.2rem 0.5rem;
    line-height: 1;
}

.grade-badge {
    background: var(--color-secondary);
    color: white;
    padding: 0.25rem 0.6rem;
    border-radius: 100px;
    font-size: 0.8rem;
    font-weight: 600;
}

/* Footer con botón */
.ciclo-footer {
    margin-top: auto;
}

.ciclo-card .btn {
    width: 100%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
}

.ciclo-card .btn svg {
    transition: transform 0.2s ease;
}

.ciclo-card .btn:hover svg {
    transform: translateX(4px);
}

/* Responsive */
@media (max-width: 1200px) {
    .ciclos-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 768px) {
    .ciclos-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }
    
    .ciclo-card {
        padding: 1.5rem 1rem;
    }
    
    .ciclo-icon {
        width: 3.5rem;
        height: 3.5rem;
        font-size: 1.5rem;
    }
}

@media (max-width: 480px) {
    .ciclos-grid {
        grid-template-columns: 1fr;
    }
}

/* Mantener section-card para áreas (si se usa en otro lugar) */
.section-card {
    display: block;
    background: linear-gradient(180deg, rgba(31, 60, 136, 0.06), rgba(31, 60, 136, 0.02));
    border: 1px solid rgba(31, 60, 136, 0.12);
    border-radius: 10px;
    padding: 1rem;
    text-decoration: none;
    color: var(--color-primary);
    transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    box-shadow: 0 2px 6px rgba(31, 60, 136, 0.03);
}
.section-card h3 { margin: 0 0 0.25rem 0; color: var(--color-primary); font-size: 1.15rem; }
.section-card p { 
    margin: 0; 
    color: var(--color-text-muted); 
    font-size: 0.875rem;
    line-height: 1.4;
}

.section-card:hover,
.section-card:focus {
    transform: translateY(-3px);
    box-shadow: 0 8px 22px rgba(31, 60, 136, 0.12);
    background: linear-gradient(180deg, var(--color-primary), rgba(31, 60, 136, 0.06));
    color: white;
}
.section-card:hover h3, .section-card:focus h3 { color: white; }
.section-card:hover p, .section-card:focus p { color: rgba(255, 255, 255, 0.9); }
.section-card:focus { outline: 3px solid rgba(31, 60, 136, 0.14); outline-offset: 2px; }

/* Sección de exploración unificada */
.explore-section {
    margin: 3rem 0;
}

.explore-main-title {
    text-align: center;
    font-size: 2rem;
    font-weight: 800;
    color: var(--color-primary);
    margin-bottom: 2.5rem;
    letter-spacing: -0.02em;
}

.section-divider {
    display: flex;
    align-items: center;
    text-align: center;
    margin: 2rem 0 1.5rem;
    opacity: 0.5;
}

.section-divider::before,
.section-divider::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid rgba(31, 60, 136, 0.2);
}

.section-divider span {
    padding: 0 1rem;
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--text-secondary);
    text-transform: lowercase;
    letter-spacing: 0.1em;
    font-style: italic;
}

/* Área cards simplificadas con contador */
.areas-section {
    margin-bottom: 3rem;
}

.section-title-centered {
    text-align: center;
    margin-bottom: 2rem;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--color-primary);
}

.areas-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
}

.area-card-simple {
    display: block;
    background: white;
    border: 2px solid rgba(31, 60, 136, 0.1);
    border-radius: 12px;
    padding: 1.25rem;
    text-decoration: none;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.area-card-simple::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
}

.area-card-simple:hover::before {
    transform: scaleX(1);
}

.area-card-simple:hover {
    transform: translateY(-4px);
    border-color: var(--color-primary);
    box-shadow: 0 8px 24px rgba(31, 60, 136, 0.15);
}

.area-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 0.75rem;
}

.area-nombre {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--color-primary);
    line-height: 1.3;
}

.area-contador {
    display: inline-block;
    padding: 0.375rem 0.75rem;
    background: rgba(31, 60, 136, 0.08);
    color: var(--color-primary);
    font-size: 0.8125rem;
    font-weight: 600;
    border-radius: 6px;
    border: 1px solid rgba(31, 60, 136, 0.15);
    margin-bottom: 0.5rem;
}

.area-descripcion {
    margin: 0;
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.area-card-simple:hover .area-nombre {
    color: var(--color-primary);
}

.area-card-simple:hover .area-contador {
    background: rgba(31, 60, 136, 0.12);
    border-color: var(--color-primary);
}

@media (max-width: 768px) {
    .areas-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 0.875rem;
    }
    
    .area-card-simple {
        padding: 1rem;
    }
    
    .area-nombre {
        font-size: 1rem;
    }
    
    .area-contador {
        font-size: 0.75rem;
        padding: 0.3rem 0.6rem;
    }
}

@media (max-width: 480px) {
    .areas-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .section-card { padding: 0.85rem; border-radius: 8px; }
}

.grid {
    display: grid;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

.grid-2 {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.grid-3 {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

.grid-4 {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

.grid-sidebar {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: var(--spacing-xl);
}

/* === Cards === */
.article-card,
.card {
    background: white;
    border: 1px solid var(--color-border-light);
    border-radius: 4px;
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    transition: all 0.12s ease;
}

/* Affordance for cards made clickable by JS */
.is-clickable { cursor: pointer; }
.is-clickable:focus { outline: 3px solid rgba(31, 60, 136, 0.18); outline-offset: 3px; }

.article-card:hover,
.card:hover {
    border-color: var(--color-primary);
    transform: translateY(-2px);
}

.article-card h3,
.card-title {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-xs);
    color: var(--color-primary);
}

.article-card h3 {
    margin-top: var(--spacing-xs);
}

.article-card h3 a {
    text-decoration: none;
    border: none;
}

/* Block-level link that fills the card so the whole card is clickable */
.card-link {
    display: block;
    color: inherit;
    text-decoration: none;
}
.card-link .card-content { /* ensure inner padding stays intact */
    display: block;
}
.card-link:focus { outline: none; }

.article-card h3 a:hover {
    color: var(--color-primary-light);
}

.card-meta {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    font-size: 0.9rem;
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-sm);
}

.card-footer {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    margin-top: var(--spacing-sm);
    font-size: 0.9rem;
    color: var(--color-text-light);
}

.card-excerpt {
    color: var(--color-text-light);
    line-height: 1.6;
}

/* === Badges === */
.badge,
.section-badge,
.difficulty-badge,
.format-badge,
.season-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 100px;
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.section-badge {
    background: var(--color-primary);
    color: white;
}

.difficulty-badge {
    background: var(--color-bg-dark);
    color: var(--color-primary);
}

.difficulty-basic {
    background: var(--color-secondary);
    color: white;
}

.difficulty-intermediate {
    background: var(--color-accent);
    color: var(--color-text);
}

.difficulty-advanced {
    background: var(--color-primary);
    color: white;
}

.format-badge {
    background: var(--color-accent);
    color: var(--color-text);
}

.season-badge {
    background: var(--color-bg-dark);
    color: var(--color-primary);
    border: 1px solid var(--color-border);
}

/* === Library Layout === */
.library-layout {
    display: grid;
    grid-template-columns: 220px 1fr;
    gap: var(--spacing-md);
}

/* Search Active Banner */
.search-active-banner {
    background: linear-gradient(135deg, rgba(31, 60, 136, 0.08) 0%, rgba(249, 168, 37, 0.08) 100%);
    border: 1px solid rgba(31, 60, 136, 0.2);
    border-radius: 8px;
    padding: 0.875rem 1.25rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
}

.search-term {
    font-size: 0.9375rem;
    color: var(--color-text);
}

.search-term strong {
    color: var(--color-primary);
    font-weight: 700;
}

.clear-search {
    background: var(--color-primary);
    color: white;
    padding: 0.375rem 0.875rem;
    border-radius: 6px;
    font-size: 0.8125rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.clear-search:hover {
    background: #163068;
    transform: translateY(-1px);
}

@media (max-width: 640px) {
    .search-active-banner {
        flex-direction: column;
        align-items: flex-start;
        padding: 0.75rem 1rem;
    }
    
    .clear-search {
        align-self: stretch;
        text-align: center;
    }
}

@media (max-width: 768px) {
    .header-search-container {
        padding: 0.75rem 0;
    }
}

.filters-sidebar,
.sidebar {
    background: var(--color-bg-light);
    padding: var(--spacing-sm);
    border-radius: 4px;
    border: 1px solid var(--color-border-light);
    margin-bottom: var(--spacing-md);
    height: fit-content;
    position: sticky;
    top: 0.5rem;
}

.sidebar h3 {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--color-accent-light);
}

.filter-group {
    margin-bottom: var(--spacing-sm);
}

.filter-group label {
    display: block;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
    color: var(--color-primary);
}

.filter-group select,
.filter-group input {
    width: 100%;
    padding: 0.35rem 0.5rem;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-sm);
    font-family: inherit;
    font-size: 0.95rem;
    background: white;
    transition: border-color 0.12s ease;
}

.filter-group select:focus,
.filter-group input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(31, 60, 136, 0.1);
}

.filter-actions {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

/* Inline filter rows: align label and control side-by-side for compact checkboxes */
.filter-inline {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
}
.filter-inline label {
    display: inline-block;
    margin-bottom: 0;
    font-weight: 600;
    color: var(--color-primary);
}
.filter-inline input[type="checkbox"] {
    width: auto;
    height: auto;
    margin: 0;
}

/* === Article Detail === */
.article-detail {
    max-width: var(--max-width-narrow);
    margin: 0 auto;
    background: white;
    padding: var(--spacing-xl);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    margin-bottom: var(--spacing-xl);
}

.article-header,
.page-header {
    margin-bottom: var(--spacing-xl);
    padding-bottom: var(--spacing-lg);
    border-bottom: 3px solid var(--color-border-light);
}

.page-header {
    text-align: center;
    padding: var(--spacing-sm) 0;
}

/* Center top-level page titles inside containers */
.container h1 {
    text-align: center;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}

.page-header h1 {
    margin-bottom: 0.25rem;
}

.page-header p {
    font-size: 1rem;
    color: var(--color-text-light);
    margin: 0;
}

/* Breadcrumbs (compact, vintage) */
.breadcrumb {
    font-size: 0.9rem;
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-sm);
}
.breadcrumb a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px dotted rgba(0,0,0,0.05);
}
.breadcrumb a:hover {
    text-decoration: underline;
}
.breadcrumb strong {
    color: var(--color-text);
    font-weight: 700;
}

/* === Article Materials (migrated from article.php) === */
.article-materials {
    margin: var(--spacing-lg) 0;
    padding: var(--spacing-sm);
    background: var(--color-bg-alt);
    border-radius: 6px;
    border: 1px solid var(--color-border-light);
}

.article-materials h2 {
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
    color: var(--color-primary);
}

.materials-intro {
    margin-bottom: 0.75rem;
    color: var(--color-text-muted);
    font-size: 0.95rem;
}

.materials-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.material-item {
    background: white;
    border-radius: 6px;
    border: 1px solid var(--color-border);
    overflow: hidden;
}

.material-info {
    padding: 0.75rem;
}

.material-info h3 {
    margin: 0 0 0.25rem 0;
    font-size: 1rem;
    color: var(--color-primary);
}

.material-info h3 a {
    color: var(--color-primary);
    text-decoration: none;
}

.material-info h3 a:hover { text-decoration: underline; }

.material-info .other-names { margin: 0; color: var(--color-text-muted); font-size: 0.9rem; }

.material-widget { padding: 0.5rem; background: var(--color-bg); border-top: 1px solid var(--color-border-light); }

@media print {
    .article-materials { background: white; border: 1px solid black; page-break-inside: avoid; }
    .material-widget, .material-purchase { display: none; }
}

/* === Material Detail Page === */
.material-detail {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: var(--spacing-md);
}

.material-header {
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.material-badges { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
.material-badge { padding: 0.4rem 0.75rem; border-radius: 12px; font-size: 0.85rem; font-weight: 700; }

.material-header h1 { font-size: 1.6rem; color: var(--color-primary); margin-bottom: 0.25rem; }
.material-technical { font-size: 0.95rem; color: var(--color-text-muted); font-style: italic; margin-bottom: 0.5rem; }
.material-other-names { font-size: 0.92rem; color: var(--color-text-muted); margin-bottom: 0.75rem; }

.material-meta { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 0.75rem; padding: 0.75rem; background: var(--color-bg-alt); border-radius: 6px; margin-top: 0.75rem; }
.meta-item .meta-label { font-size: 0.75rem; text-transform: uppercase; color: var(--color-text-muted); font-weight: 700; margin-bottom: 0.25rem; }
.meta-value { font-size: 0.98rem; color: var(--color-primary); font-weight: 700; font-family: var(--font-mono); }

.content-section { background: white; border: 1px solid var(--color-border); border-radius: 6px; padding: var(--spacing-md); margin-bottom: var(--spacing-md); }
.content-section h2 { font-size: 1.1rem; color: var(--color-primary); margin-bottom: 0.75rem; border-bottom: 2px solid var(--color-border-light); padding-bottom: 0.35rem; }

.safety-warning { background: #fff8e6; border-left: 4px solid #f0c36d; padding: 0.75rem; margin: 0.75rem 0; border-radius: 4px; }
.safety-warning h3 { color: #8b5a00; margin: 0 0 0.25rem 0; }

.specifications { background: var(--color-bg-alt); border: 1px solid var(--color-border); border-radius: 4px; padding: 0.75rem; }
.specifications dl { display: grid; grid-template-columns: 160px 1fr; gap: 0.5rem; margin: 0; }
.specifications dt { font-weight: 700; color: var(--color-text-muted); }
.specifications dd { margin: 0; color: var(--color-text); }

.purchase-section { background: var(--color-primary); color: white; border-radius: 6px; padding: var(--spacing-md); margin-bottom: var(--spacing-md); text-align: center; }
.purchase-button { display: inline-block; padding: 0.5rem 1rem; background: white; color: var(--color-primary); text-decoration: none; font-weight: 700; border-radius: 4px; }

/* Make purchase-button more prominent and accessible */
.purchase-button {
    border: 2px solid rgba(255,255,255,0.12);
    padding: 0.6rem 1.1rem;
    border-radius: 6px;
}
.purchase-button:focus { outline: 3px solid rgba(255,255,255,0.18); outline-offset: 2px; }
.purchase-button:hover { background: rgba(255,255,255,0.95); color: var(--color-primary); transform: translateY(-1px); }

/* Compact Learn More variant used on material detail pages */
.purchase-section.purchase-learnmore {
    background: transparent;
    padding: 0.5rem 0;
    margin-bottom: var(--spacing-md);
    text-align: center;
}
.purchase-section.purchase-learnmore .material-cta {
    background: var(--color-accent);
    color: white;
    padding: 0.6rem 1rem;
    border-radius: 999px;
    box-shadow: 0 6px 12px rgba(10,40,20,0.06);
}
.purchase-section.purchase-learnmore .material-cta:hover {
    background: var(--color-accent-light);
}

.related-articles { background: white; border: 1px solid var(--color-border); border-radius: 6px; padding: var(--spacing-md); margin-bottom: var(--spacing-md); }
.article-list { display: grid; gap: 0.5rem; }
.article-item { display: flex; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: 4px; text-decoration: none; color: inherit; }
.back-button { display: inline-block; padding: 0.5rem 0.75rem; background: var(--color-primary); color: white; text-decoration: none; font-weight: 700; border-radius: 4px; margin-top: var(--spacing-md); }

@media (max-width: 768px) {
    .material-detail { padding: var(--spacing-sm); }
    .material-header h1 { font-size: 1.25rem; }
}

/* Product / Technical sheet layout for material details */
.material-top {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: var(--spacing-md);
    align-items: start;
    margin-bottom: var(--spacing-md);
}

.product-card {
    /* Core card styling for product / technical sheet */
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    position: relative; /* allows sticky behavior on larger screens */
}

.product-card .price, .product-card .cta-wrap { text-align: center; }


/* Quick-meta contains a set of fast links/quick stats. Hide by default
    to reduce duplication with the footer/utility links. If you need to show
    it on a specific page, add the class `show-quick-meta` to the body. */
.product-card .quick-meta { display: none; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
.show-quick-meta .product-card .quick-meta { display: grid; }
.product-card .quick-meta .meta { font-size: 0.85rem; color: var(--color-text-muted); }

.product-card .product-badges { display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:0.5rem; }


.product-card .product-badges { display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:0.5rem; }

.product-card .product-image {
    background: var(--color-bg-alt);
    border: 1px solid var(--color-border);
    height: 180px; /* larger, gives more visual weight */
    border-radius: 6px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--color-text-muted);
    font-size:0.95rem;
    overflow: hidden;
}

.product-card .product-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    display: block;
}

.product-image-fallback {
    display:flex;
    align-items:center;
    justify-content:center;
    height:100%;
    color:var(--color-text-muted);
    font-size:0.95rem;
}

/* Hide homepage quick-links by default if a full footer exists. You can re-enable
   by adding `show-quick-links` to the body element on pages that need them. */
.quick-links { display: none; }
.show-quick-links .quick-links { display: block; }

/* Slight visual polish for product card */
.product-card {
    box-shadow: 0 6px 18px rgba(10, 40, 20, 0.06);
    padding: calc(var(--spacing-md) + 0.25rem);
}

/* Reduce visual noise for badges inside the product-card */
.product-card .material-badge { font-size: 0.85rem; padding: 0.35rem 0.6rem; border-radius: 999px; }

.product-card .cta {
    display: inline-block;
    padding: 0.6rem 0.9rem;
    background: var(--color-accent); /* improved contrast against dark headers */
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 700;
    text-align: center;
    border: 1px solid rgba(0,0,0,0.06);
}

.product-card .cta:focus {
    outline: 3px solid rgba(74,124,89,0.18);
    outline-offset: 2px;
}

.product-card .cta:hover {
    background: var(--color-accent-light);
    color: white;
    transform: translateY(-1px);
}

/* Make CTA more prominent on narrow viewports (full width) */
@media (max-width: 900px) {
    .product-card .cta { display: block; width: 100%; }
}

/* Sticky product card on wider screens to keep the quick info visible */
@media (min-width: 900px) {
    .product-card { position: sticky; top: calc(var(--spacing-md) + 0.5rem); }
}

@media (max-width: 900px) {
    .material-top { grid-template-columns: 1fr; }
    .product-card { order: 2; }
}

.article-info,
.article-meta {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    font-size: 0.95rem;
    color: var(--color-text-muted);
    margin-top: var(--spacing-md);
}

.article-meta {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    margin-bottom: var(--spacing-md);
}

.article-seasons {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    align-items: center;
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm);
    background: var(--color-bg-alt);
    border-radius: var(--border-radius-sm);
}

.article-body {
    margin-bottom: var(--spacing-xl);
    line-height: 1.8;
}

.article-body h2 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
}

.article-body ul,
.article-body ol {
    margin-left: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
}

.article-body li {
    margin-bottom: var(--spacing-xs);
}

.article-chemicals {
    background: var(--color-bg-light);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius);
    border: 2px solid var(--color-accent-light);
    margin: var(--spacing-xl) 0;
}

.article-chemicals h2 {
    color: var(--color-primary);
    margin-bottom: var(--spacing-md);
}

.chemical-card {
    padding: var(--spacing-md);
    background: white;
    border-radius: var(--border-radius-sm);
    margin-bottom: var(--spacing-md);
    border-left: 4px solid var(--color-accent);
}

.chemical-card:last-child {
    margin-bottom: 0;
}

.formula {
    font-family: var(--font-mono);
    background: var(--color-bg-dark);
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
    font-weight: 600;
    color: var(--color-primary);
}

/* === Embedded Products (AbanteCart) === */
.article-products {
    background: linear-gradient(135deg, var(--color-bg-light) 0%, var(--color-bg-alt) 100%);
    padding: var(--spacing-xl);
    border-radius: var(--border-radius);
    border: 2px solid var(--color-accent-light);
    margin: var(--spacing-xl) 0;
    box-shadow: var(--shadow-md);
}

.article-products h2 {
    color: var(--color-primary);
    margin-bottom: var(--spacing-sm);
    font-size: 1.75rem;
}

.products-intro {
    color: var(--color-text-light);
    margin-bottom: var(--spacing-lg);
    font-size: 1.05rem;
}

.embedded-products {
    display: grid;
    gap: var(--spacing-lg);
    margin-top: var(--spacing-lg);
}

.product-embed-wrapper {
    background: white;
    padding: var(--spacing-md);
    border-radius: var(--border-radius);
    border: 2px solid var(--color-border-light);
    transition: all 0.3s ease;
}

.product-embed-wrapper:hover {
    border-color: var(--color-accent);
    box-shadow: var(--shadow-md);
}

.product-embed-wrapper h3 {
    color: var(--color-primary);
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0 0 var(--spacing-sm) 0;
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border-light);
}

/* AbanteCart Widget Styling */
.abantecart-widget-container {
    display: block !important;
    margin-top: var(--spacing-sm);
}

.abantecart_product {
    background: transparent !important;
    padding: 0 !important;
    border: none !important;
}

.abantecart_name {
    color: var(--color-primary) !important;
    font-size: 1.15rem !important;
    font-weight: 600 !important;
    margin-bottom: var(--spacing-sm) !important;
}

.abantecart_image img {
    border-radius: var(--border-radius-sm);
    max-width: 100%;
    height: auto;
}

.abantecart_blurb {
    color: var(--color-text) !important;
    margin: var(--spacing-sm) 0 !important;
}

.abantecart_addtocart button,
.abantecart_addtocart a {
    background: var(--color-primary) !important;
    color: white !important;
    border: 2px solid var(--color-primary) !important;
    padding: var(--spacing-sm) var(--spacing-lg) !important;
    border-radius: var(--border-radius-sm) !important;
    font-weight: 600 !important;
    transition: all 0.2s ease !important;
    cursor: pointer !important;
    text-decoration: none !important;
}

.abantecart_addtocart button:hover,
.abantecart_addtocart a:hover {
    background: var(--color-accent) !important;
    border-color: var(--color-accent) !important;
    transform: translateY(-1px);
}

/* === Call to Action === */
.cta-box {
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius);
    margin: var(--spacing-xl) 0;
    text-align: center;
    color: white;
    box-shadow: var(--shadow-md);
}

.cta-box h3 {
    color: white;
    margin-bottom: var(--spacing-md);
}

.cta-box .btn {
    background: white;
    color: var(--color-primary);
    border-color: white;
}

.cta-box .btn:hover {
    background: var(--color-bg-alt);
    border-color: var(--color-bg-alt);
}

/* === Footer === */
.site-footer {
    background: var(--color-primary);
    color: white;
    padding: var(--spacing-xl) 0 var(--spacing-lg);
    margin-top: var(--spacing-2xl);
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-xl);
    margin-bottom: var(--spacing-lg);
}

.footer-section h3,
.footer-section h4 {
    color: var(--color-accent-light);
    margin-bottom: var(--spacing-md);
}

.footer-section ul {
    list-style: none;
}

.footer-section li {
    margin-bottom: var(--spacing-xs);
}

.footer-section a {
    color: white;
    border-bottom-color: transparent;
}

.footer-section a:hover {
    color: var(--color-accent-light);
    border-bottom-color: var(--color-accent-light);
}

.footer-bottom {
    text-align: center;
    padding-top: var(--spacing-lg);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--color-accent-light);
    font-size: 0.9rem;
}

/* === Pagination === */
.pagination {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
    margin: var(--spacing-xl) 0;
}

.pagination a,
.pagination span {
    padding: var(--spacing-xs) var(--spacing-md);
    border: 2px solid var(--color-border);
    border-radius: var(--border-radius-sm);
    color: var(--color-primary);
    text-decoration: none;
    transition: all 0.2s ease;
}

.pagination a:hover {
    background: var(--color-accent);
    border-color: var(--color-accent);
    color: white;
}

.pagination .active span,
.pagination .current {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: white;
}

.pagination ul {
    list-style: none;
    display: flex;
    gap: var(--spacing-xs);
    justify-content: center;
    flex-wrap: wrap;
}

/* === Responsive === */
@media (max-width: 768px) {
    :root {
        --spacing-xl: 2rem;
        --spacing-2xl: 2.5rem;
    }
    
    h1 { font-size: 2rem; }
    h2 { font-size: 1.75rem; }
    h3 { font-size: 1.5rem; }
    
    .hero h1,
    .hero h2 {
        font-size: 2.25rem;
    }
    
    .grid-sidebar,
    .library-layout {
        grid-template-columns: 1fr;
    }
    
    .filters-sidebar,
    .sidebar {
        position: static;
    }
    
    .header-content {
        flex-direction: column;
        text-align: center;
    }
    
    .main-nav ul {
        justify-content: center;
    }
    
    .article-detail {
        padding: var(--spacing-lg);
    }
}

@media (max-width: 480px) {
    h1 { font-size: 1.75rem; }
    h2 { font-size: 1.5rem; }
    
    .btn {
        width: 100%;
        text-align: center;
    }
    
    .grid-2,
    .grid-3,
    .grid-4,
    .articles-grid,
    .sections-grid {
        grid-template-columns: 1fr;
    }
}

/* === Utility Classes === */
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-muted { color: var(--color-text-muted); }
.text-green { color: var(--color-accent); }
.text-dark-green { color: var(--color-primary); }

.mt-sm { margin-top: var(--spacing-sm); }
.mt-md { margin-top: var(--spacing-md); }
.mt-lg { margin-top: var(--spacing-lg); }
.mt-xl { margin-top: var(--spacing-xl); }

.mb-sm { margin-bottom: var(--spacing-sm); }
.mb-md { margin-bottom: var(--spacing-md); }
.mb-lg { margin-bottom: var(--spacing-lg); }
.mb-xl { margin-bottom: var(--spacing-xl); }

.hidden { display: none; }

.no-print {
    /* Will be hidden in print.css */
    display: block;
}

.print-only {
    display: none;
}

/* === Materials Section (Homepage) === */
.featured-materials {
    margin: var(--spacing-2xl) 0;
}

.featured-materials h2 {
    text-align: center;
    margin-bottom: var(--spacing-xs);
}

.section-subtitle {
    text-align: center;
    color: var(--color-text-muted);
    font-size: 1.1rem;
    margin-bottom: var(--spacing-lg);
}

.materials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.material-card {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: 0.75rem;
    transition: all 0.12s ease;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: inherit;
}

/* === Materials Page (page-scoped rules moved from materials.php) === */
.materials-page .materials-container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
.materials-page .category-nav { background: white; border: 2px solid #000; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem; }
.materials-page .category-tabs { display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1rem; }
.materials-page .category-tab { padding: 0.75rem 1.5rem; background: white; border: 2px solid #ddd; text-decoration: none; color: #333; font-weight: 600; border-radius: 4px; transition: all 0.2s; }
.materials-page .category-tab:hover { border-color: #2c5f2d; background: #f8f9fa; }
.materials-page .category-tab.active { background: #2c5f2d; color: white; border-color: #2c5f2d; }
.materials-page .subcategory-filter { border-top: 1px solid #ddd; padding-top: 1rem; margin-top: 1rem; }
.materials-page .subcategory-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.materials-page .subcategory-tag { padding: 0.5rem 1rem; background: #f8f9fa; border: 1px solid #ddd; text-decoration: none; color: #333; font-size: 0.9rem; border-radius: 20px; transition: all 0.2s; }
.materials-page .subcategory-tag:hover { background: #e9ecef; border-color: #999; }
.materials-page .subcategory-tag.active { background: #2c5f2d; color: white; border-color: #2c5f2d; }
.materials-page .search-filter-bar { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; }
.materials-page .search-box { flex: 1; min-width: 300px; }
.materials-page .search-box input { width: 100%; padding: 0.75rem 1rem; border: 2px solid #ddd; border-radius: 4px; font-size: 1rem; }
.materials-page .filter-toggles { display: flex; gap: 1rem; }
.materials-page .filter-toggle { padding: 0.75rem 1.5rem; background: white; border: 2px solid #ddd; text-decoration: none; color: #333; font-weight: 600; border-radius: 4px; transition: all 0.2s; }
.materials-page .filter-toggle.active { background: #2c5f2d; color: white; border-color: #2c5f2d; }
.materials-page .clear-filters { padding: 0.75rem 1.5rem; background: #dc3545; color: white; border: none; text-decoration: none; font-weight: 600; border-radius: 4px; }
.materials-page .results-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
.materials-page .results-count { font-size: 1.2rem; color: #666; }
.materials-page .results-count strong { color: #2c5f2d; }

/* Sort selector for catalog */
.library-page .results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
    gap: 1rem;
}

.sort-selector {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.sort-selector label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin: 0;
}

.sort-selector select {
    padding: 0.5rem 2rem 0.5rem 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: white;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.sort-selector select:hover {
    border-color: var(--color-primary);
}

.sort-selector select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(31, 60, 136, 0.1);
}

/* Compact active filters shown near results header */
.active-filters.compact {
    margin-top: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}
.active-filters.compact .filters-list { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; }
.active-filters.compact .filter-item {
    background: var(--color-bg-alt);
    color: var(--color-text);
    padding: 0.25rem 0.5rem;
    border-radius: 999px;
    font-size: 0.9rem;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    border: 1px solid var(--color-border-light);
}
.active-filters.compact .filter-remove {
    color: var(--color-text-muted);
    text-decoration: none;
    font-weight: 700;
    margin-left: 0.25rem;
}
.active-filters.compact .filter-remove:hover { color: var(--color-primary); }
.materials-page .materials-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 3rem; }
.materials-page .material-card { background: white; border: 2px solid #ddd; border-radius: 8px; padding: 1.5rem; transition: all 0.3s; text-decoration: none; color: inherit; display: flex; flex-direction: column; }
.materials-page .material-card:hover { border-color: #2c5f2d; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-2px); }
.materials-page .material-badges { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
.materials-page .material-badge { padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
.materials-page .badge-substance { background: #d4edda; color: #155724; }
.materials-page .badge-equipment { background: #d1ecf1; color: #0c5460; }
.materials-page .badge-tool { background: #fff3cd; color: #856404; }
.materials-page .badge-container { background: #f8d7da; color: #721c24; }
.materials-page .badge-safety { background: #f0e68c; color: #8b4513; }
.materials-page .badge-consumable { background: #e7e7e7; color: #333; }
.materials-page .badge-featured { background: #ffc107; color: #000; }
.materials-page .badge-essential { background: #28a745; color: white; }
.materials-page .material-card h3 { font-size: 1.3rem; margin-bottom: 0.5rem; color: #2c5f2d; }
.materials-page .material-technical { font-size: 0.9rem; color: #666; font-style: italic; margin-bottom: 0.5rem; }
.materials-page .material-formula { font-family: 'Courier New', monospace; font-weight: bold; color: #2c5f2d; margin-bottom: 1rem; }
.materials-page .material-description { flex: 1; color: #333; line-height: 1.6; margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 3; line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
.materials-page .material-footer { display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid #eee; }
.materials-page .material-category-icon { font-size: 1.5rem; }
.materials-page .material-cta { padding: 0.5rem 1rem; background: #2c5f2d; color: white; border-radius: 4px; font-weight: 600; font-size: 0.9rem; }
.materials-page .material-card:hover .material-cta { background: #1a3a1b; }

/* Ensure material CTA is always high contrast and keyboard focusable when converted to a link */
.material-cta {
    display: inline-block;
    padding: 0.45rem 0.85rem;
    background: var(--color-primary);
    color: white;
    border-radius: 6px;
    font-weight: 700;
    text-decoration: none;
    transition: background 0.12s ease, transform 0.12s ease;
}
.material-cta:hover { background: var(--color-primary-light); transform: translateY(-1px); }
.material-cta:focus { outline: 3px solid rgba(15,59,31,0.18); outline-offset: 2px; }
.materials-page .empty-state { text-align: center; padding: 4rem 2rem; background: white; border: 2px dashed #ddd; border-radius: 8px; }
.materials-page .empty-state h2 { font-size: 1.8rem; margin-bottom: 1rem; color: #666; }
.materials-page .empty-state p { color: #999; margin-bottom: 2rem; }
.materials-page .pagination { display: flex; justify-content: center; gap: 0.5rem; margin-top: 3rem; }
.materials-page .pagination a, .materials-page .pagination span { padding: 0.75rem 1.25rem; background: white; border: 2px solid #ddd; text-decoration: none; color: #333; font-weight: 600; border-radius: 4px; }
.materials-page .pagination a:hover { border-color: #2c5f2d; background: #f8f9fa; }
.materials-page .pagination .current { background: #2c5f2d; color: white; border-color: #2c5f2d; }
.materials-page .pagination .disabled { opacity: 0.5; cursor: not-allowed; }

@media (max-width: 768px) {
    .materials-page .page-header h1 { font-size: 1.8rem; }
    .materials-page .category-tabs { flex-direction: column; }
    .materials-page .category-tab { text-align: center; }
    .materials-page .search-filter-bar { flex-direction: column; }
    .materials-page .search-box { width: 100%; }
    .materials-page .materials-grid { grid-template-columns: 1fr; }
}


.material-card:hover {
    border-color: var(--color-accent);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.material-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.material-icon {
    font-size: 1.5rem;
}

.material-category {
    font-size: 0.75rem;
    text-transform: uppercase;
    font-weight: 700;
    color: var(--color-text-muted);
    letter-spacing: 0.05em;
}

.material-card h3 {
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
    color: var(--color-primary);
}

.material-technical {
    font-size: 0.9rem;
    color: var(--color-text-muted);
    font-style: italic;
    margin-bottom: var(--spacing-xs);
}

.material-formula {
    font-family: var(--font-mono);
    font-weight: bold;
    color: var(--color-accent);
    margin-bottom: var(--spacing-sm);
    font-size: 1rem;
}

.material-description {
    flex: 1;
    color: var(--color-text-light);
    line-height: 1.5;
    font-size: 0.92rem;
}

/* Technical/spec table for material main area */
.material-specs {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--spacing-md);
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    overflow: hidden;
}
.material-specs tbody tr { border-bottom: 1px solid var(--color-border-light); }
.material-specs th,
.material-specs td {
    padding: 0.6rem 0.9rem;
    vertical-align: top;
}
.material-specs th {
    width: 36%;
    text-align: left;
    font-weight: 700;
    color: var(--color-primary);
    background: var(--color-bg-alt);
}
.material-specs td {
    color: var(--color-text);
}
.material-specs td.mono { font-family: var(--font-mono); color: var(--color-primary); font-weight: 700; }

@media (max-width: 768px) {
    .material-specs th { display: block; width: 100%; padding-top: 0.65rem; }
    .material-specs td { display: block; width: 100%; padding-bottom: 0.65rem; }
    .material-specs tbody tr { border-bottom: 1px solid var(--color-border-light); }
}

/* Utility: visually hidden for caption accessibility */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0; }

/* === Print Compatibility === */
@media print {
    .site-header,
    .main-nav,
    .sidebar,
    .filters-sidebar,
    .cta-box,
    .site-footer,
    .pagination,
    .no-print {
        display: none;
    }
    
    .print-only {
        display: block;
    }
    
    body {
        color: #000;
        background: #fff;
    }
    
    .article-detail {
        box-shadow: none;
        padding: 0;
    }
    
    a {
        color: #000;
        text-decoration: underline;
    }
}

/* === Article page specific rules moved from article.php === */
/* Narrow the page chrome and let article content use more horizontal space */
.container.article-container {
    max-width: 1400px; /* allow wider content */
    padding-left: 1rem;
    padding-right: 1rem;
}
.article-detail {
    background: none;
    padding: 0.75rem 0.5rem; /* reduce internal padding */
    margin-bottom: 1rem;
    border-radius: 6px;
    box-shadow: none;
}
.article-detail .breadcrumb { margin-bottom: 0.5rem; }
.article-meta { gap: 0.5rem; font-size: 0.95rem; margin-bottom: 0.5rem; }
.article-body { padding: 0; max-width: none; }

/* Material items styling (from article.php) */
.article-materials {
    margin: 3rem 0;
    padding: 2rem;
    background: #f9fafb;
    border-radius: 8px;
    border: 2px solid #e5e7eb;
}

.article-materials h2 {
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
    color: #111;
}

.materials-intro {
    margin-bottom: 2rem;
    color: #6b7280;
}

.materials-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.material-item {
    background: white;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    overflow: hidden;
}

.material-info {
    padding: 1.5rem;
}

.material-info h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.25rem;
    color: #111;
}

.material-info h3 a {
    color: #2563eb;
    text-decoration: none;
}

.material-info h3 a:hover {
    text-decoration: underline;
}

.material-info .other-names {
    margin: 0;
    color: #6b7280;
    font-size: 0.9rem;
}

.material-info .other-names em {
    font-style: italic;
}

.material-widget {
    padding: 1.5rem;
    background: #f9fafb;
    border-top: 1px solid #e5e7eb;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

/* Ensure embedded widgets (iframes/objects) are centered and responsive */
.material-widget iframe,
.material-widget embed,
.material-widget object,
.material-widget .abantecart-widget-container {
    max-width: 100%;

    height: auto;
}

/* Print styles for materials (moved) */
@media print {
    .article-materials {
        background: white;
        border: 2px solid black;
        page-break-inside: avoid;
    }
    
    .material-widget,
    .material-purchase {
        display: none;
    }
    
    .material-info h3 a {
        color: black;
        text-decoration: none;
    }
    
    .material-info h3 a::after {
        content: " (see thegreenalmanac.com for purchasing info)";
        font-weight: normal;
        font-size: 0.85rem;
    }
}

/* ============================================================================
   ADMIN PANEL STYLES
   Sistema administrativo completo para el backend de Clase de Ciencia
   Reutiliza clases base del sitio (.btn, .card, .page-header) y usa variables CSS
   ============================================================================ */

/* === Admin Layout === */
.admin-header {
    background: var(--color-text);
    color: white;
    padding: var(--spacing-lg) var(--spacing-xl);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.admin-header h1 {
    font-size: 1.25rem;
    color: white;
}

.admin-header a {
    color: white;
    text-decoration: none;
    margin-left: var(--spacing-lg);
    border: none;
}

.admin-header a:hover {
    text-decoration: underline;
    color: white;
}

.admin-container {
    display: flex;
    min-height: calc(100vh - 60px);
}

/* === Admin Sidebar === */
.admin-sidebar {
    width: 250px;
    background: white;
    border-right: 2px solid var(--color-border);
    padding: var(--spacing-lg) 0;
}

.admin-sidebar nav ul {
    list-style: none;
}

.admin-sidebar nav li {
    margin-bottom: var(--spacing-sm);
}

.admin-sidebar nav a {
    display: block;
    padding: var(--spacing-md) var(--spacing-xl);
    color: var(--color-text);
    text-decoration: none;
    font-weight: 500;
    border: none;
}

.admin-sidebar nav a:hover,
.admin-sidebar nav a.active {
    background: var(--color-bg-alt);
    border-left: 3px solid var(--color-primary);
    color: var(--color-primary);
}

/* === Admin Main Content === */
.admin-main {
    flex: 1;
    padding: var(--spacing-xl);
    max-width: 1200px;
}

/* Admin page-header ya existe en línea 666 - solo ajustar para admin */
.admin-main .page-header {
    text-align: left;
    border-bottom: 2px solid var(--color-border);
}

/* === Admin Buttons === */
/* Reutiliza .btn base (línea 332) - solo estilos adicionales para admin */
.admin-main .btn {
    background: var(--color-text);
    border-color: var(--color-text);
}

.admin-main .btn:hover {
    background: var(--color-text-light);
    border-color: var(--color-text-light);
}

.admin-main .btn-secondary {
    background: white;
    color: var(--color-text);
    border-color: var(--color-border);
}

.admin-main .btn-secondary:hover {
    background: var(--color-bg-alt);
    border-color: var(--color-primary);
}

.admin-main .btn-danger {
    background: #c62828;
    border-color: #c62828;
}

.admin-main .btn-danger:hover {
    background: #b71c1c;
}

/* === Admin Tables === */
.data-table {
    width: 100%;
    background: white;
    border: 1px solid var(--color-border);
    border-collapse: collapse;
    margin-bottom: var(--spacing-lg);
}

.data-table th,
.data-table td {
    padding: var(--spacing-md);
    text-align: left;
    border-bottom: 1px solid var(--color-border-light);
}

.data-table th {
    background: var(--color-bg-light);
    font-weight: 600;
    color: var(--color-primary);
}

.data-table tr:hover {
    background: var(--color-bg-alt);
}

/* === Admin Forms === */
/* Extiende .filter-group existente para consistencia */
.form-group {
    margin-bottom: var(--spacing-xl);
}

.form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: var(--spacing-sm);
    color: var(--color-primary);
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group input[type="date"],
.form-group input[type="datetime-local"],
.form-group input[type="email"],
.form-group input[type="url"],
.form-group select,
.form-group textarea {
    width: 100%;
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-sm);
    font-size: 1rem;
    font-family: inherit;
    transition: border-color 0.2s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(31, 60, 136, 0.1);
}

.form-group textarea {
    min-height: 60px;
    font-family: var(--font-body);
    line-height: 1.5;
    resize: vertical;
}

.form-group small,
.help-text {
    display: block;
    margin-top: var(--spacing-xs);
    color: var(--color-text-muted);
    font-size: 0.85rem;
    line-height: 1.4;
}

/* === Checkbox Grid === */
.checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
}

.checkbox-grid label {
    display: flex;
    align-items: center;
    font-size: 0.9rem;
    cursor: pointer;
    padding: var(--spacing-xs);
}

.checkbox-grid input[type="checkbox"] {
    margin-right: var(--spacing-xs);
    cursor: pointer;
}

/* === Admin Cards === */
/* Reutiliza .card base (línea 458) - solo ajustes específicos */
.admin-main .card {
    border-color: var(--color-border);
}

/* === Admin Stats === */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

.stat-card {
    background: white;
    border: 2px solid var(--color-primary);
    border-radius: var(--border-radius-sm);
    padding: var(--spacing-xl);
    text-align: center;
}

.stat-card h3 {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-sm);
    color: var(--color-primary);
}

.stat-card p {
    color: var(--color-text-muted);
    font-weight: 600;
}

/* === Admin Messages === */
.message {
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
    border-left: 4px solid var(--color-primary);
    border-radius: var(--border-radius-sm);
}

.message.success {
    background: #e8f5e9;
    border-color: var(--color-secondary);
}

.message.error {
    background: #ffebee;
    border-color: var(--color-error);
}

.message.info {
    background: #e3f2fd;
    border-color: var(--color-info);
}

.message.warning {
    background: #fff9e6;
    border-color: var(--color-warning);
}

/* === Admin Actions === */
.actions {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.action-btn {
    padding: var(--spacing-xs) var(--spacing-md);
    font-size: 0.875rem;
    text-decoration: none;
    display: inline-block;
}

/* === Dual Listbox System === */
/* Transfer list para selección de competencias MEN */

.dual-listbox-container {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: var(--spacing-lg);
    margin: var(--spacing-lg) 0;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: var(--spacing-lg);
    background: var(--color-bg-alt);
}

.listbox-panel {
    display: flex;
    flex-direction: column;
    min-height: 400px;
}

.listbox-header {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--color-primary);
    color: white;
    border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
    font-weight: 600;
}

.listbox-header strong {
    color: white;
    font-weight: 600;
}

.counter {
    background: rgba(255,255,255,0.2);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
}

.listbox-search {
    padding: var(--spacing-sm) var(--spacing-md);
    border: 1px solid var(--color-border);
    border-top: none;
    font-size: 0.9rem;
    outline: none;
    font-family: inherit;
}

.listbox-search:focus {
    background: #fffacd;
}

.listbox-content {
    flex: 1;
    overflow-y: auto;
    border: 1px solid var(--color-border);
    border-top: none;
    background: white;
    padding: var(--spacing-xs);
    max-height: 450px;
}

.competencia-grupo {
    margin-bottom: var(--spacing-xs);
}

.grupo-header {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--color-bg-light);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    user-select: none;
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-weight: 600;
    color: var(--color-primary);
}

.grupo-header:hover {
    background: var(--color-bg-dark);
}

.grupo-toggle {
    font-size: 0.65rem;
    width: 15px;
}

.grupo-count {
    margin-left: auto;
    font-size: 0.75rem;
    color: var(--color-text-muted);
}

.grupo-items {
    padding-left: var(--spacing-md);
}

.competencia-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    border-bottom: 1px solid var(--color-border-light);
    cursor: pointer;
    font-size: 0.85rem;
    transition: background 0.2s;
}

.competencia-item:hover {
    background: var(--color-bg-alt);
}

.competencia-item.hidden {
    display: none !important;
}

.competencia-item.selected {
    background: #e6f7ff;
}

.comp-codigo {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    background: var(--color-bg-light);
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    white-space: nowrap;
    color: var(--color-primary);
    font-weight: 600;
}

.comp-nombre {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.info-btn {
    background: none;
    border: none;
    cursor: help;
    font-size: 0.9rem;
    padding: 0;
    opacity: 0.6;
    transition: opacity 0.2s;
    color: var(--color-primary);
}

.info-btn:hover {
    opacity: 1;
}

.remove-btn {
    background: var(--color-error);
    color: white;
    border: none;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    cursor: pointer;
    font-size: 1rem;
    line-height: 1;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.remove-btn:hover {
    background: #b71c1c;
}

.listbox-buttons {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: var(--spacing-md);
}

.listbox-buttons button {
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--border-radius-sm);
    padding: var(--spacing-md);
    cursor: pointer;
    font-size: 1.1rem;
    transition: background 0.2s;
    font-weight: 600;
}

.listbox-buttons button:hover {
    background: var(--color-primary-light);
}

.competencia-tooltip {
    position: fixed;
    background: var(--color-text);
    color: white;
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--border-radius);
    max-width: 300px;
    font-size: 0.8rem;
    line-height: 1.4;
    z-index: 10000;
    box-shadow: var(--shadow-lg);
    cursor: pointer;
}

/* === Admin Responsive Design === */
@media (max-width: 768px) {
    .admin-container {
        flex-direction: column;
    }
    
    .admin-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 2px solid var(--color-border);
    }
    
    .dual-listbox-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
    }
    
    .listbox-buttons {
        flex-direction: row;
        order: 2;
    }
    
    .listbox-panel:first-child {
        order: 1;
    }
    
    .listbox-panel:last-child {
        order: 3;
    }
}

/* === Article Page - Proyecto Detail === */

/* Card de Resumen Técnico */
.clase-summary-card {
    background: white;
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    margin: var(--spacing-xl) 0;
    border: 1px solid var(--color-border-light);
}

.summary-content {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 0;
}

.summary-left {
    background: var(--color-bg-alt);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
}

.summary-image {
    width: 100%;
    height: 320px;
    object-fit: cover;
    border-radius: var(--border-radius);
}

.summary-placeholder {
    width: 100%;
    height: 320px;
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%);
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
}

.placeholder-icon {
    font-size: 5rem;
    opacity: 0.3;
}

.summary-right {
    padding: var(--spacing-xl);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.summary-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: var(--spacing-md);
    padding-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--color-primary);
}

.summary-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-primary);
    margin: 0;
    line-height: 1.3;
    flex: 1;
}

.summary-specs {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-md);
}

.spec-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--color-bg-light);
    border-radius: var(--border-radius-sm);
}

.spec-item-full {
    grid-column: 1 / -1;
}

.spec-label {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.spec-value {
    font-size: 1rem;
    font-weight: 500;
    color: var(--color-text);
}

.spec-value.difficulty-facil {
    color: var(--color-success);
}

.spec-value.difficulty-media,
.spec-value.difficulty-medio {
    color: var(--color-warning);
}

.spec-value.difficulty-dificil {
    color: var(--color-error);
}

.spec-ciclo-clickable {
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.spec-ciclo-clickable:hover {
    background: white;
    box-shadow: var(--shadow-sm);
    transform: translateY(-2px);
}

.spec-ciclo-clickable .spec-value {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.info-icon {
    font-size: 0.85rem;
    opacity: 0.6;
    transition: opacity 0.2s;
}

.spec-ciclo-clickable:hover .info-icon {
    opacity: 1;
}

/* Modal de Ciclo */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: var(--spacing-lg);
    backdrop-filter: blur(4px);
}

.modal-overlay.active {
    display: flex;
}

.modal-content {
    background: white;
    border-radius: var(--border-radius-lg);
    max-width: 700px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
    position: relative;
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-close {
    position: absolute;
    top: var(--spacing-lg);
    right: var(--spacing-lg);
    background: transparent;
    border: none;
    font-size: 2rem;
    color: var(--color-text-muted);
    cursor: pointer;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s;
    line-height: 1;
}

.modal-close:hover {
    background: var(--color-bg-light);
    color: var(--color-error);
}

.modal-header {
    padding: var(--spacing-xl);
    border-bottom: 2px solid var(--color-primary);
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%);
    color: white;
}

.modal-header h2 {
    margin: 0;
    font-size: 1.6rem;
    padding-right: var(--spacing-xl);
    color: white;
}

.modal-body {
    padding: var(--spacing-xl);
}

.ciclo-info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
}

.ciclo-info-item {
    background: var(--color-bg-light);
    padding: var(--spacing-md);
    border-radius: var(--border-radius-sm);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.ciclo-info-item strong {
    color: var(--color-primary);
    font-size: 0.85rem;
}

.ciclo-info-item span {
    color: var(--color-text);
    font-size: 1rem;
}

.ciclo-proposito,
.ciclo-explicacion {
    margin-bottom: var(--spacing-xl);
}

.ciclo-proposito h3,
.ciclo-explicacion h3 {
    color: var(--color-primary);
    font-size: 1.2rem;
    margin-bottom: var(--spacing-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.ciclo-proposito p,
.ciclo-explicacion p {
    color: var(--color-text);
    line-height: 1.7;
    margin: 0;
    background: var(--color-bg-alt);
    padding: var(--spacing-md);
    border-radius: var(--border-radius-sm);
    border-left: 3px solid var(--color-primary);
}

.modal-actions {
    display: flex;
    gap: var(--spacing-md);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--color-border-light);
}

.btn {
    padding: var(--spacing-md) var(--spacing-xl);
    border-radius: var(--border-radius);
    font-weight: 600;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    font-size: 1rem;
}

.btn-primary {
    background: var(--color-primary);
    color: white;
}

.btn-primary:hover {
    background: var(--color-primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--color-bg-light);
    color: var(--color-text);
    border: 1px solid var(--color-border);
}

.btn-secondary:hover {
    background: var(--color-bg-dark);
}

@media (max-width: 768px) {
    .modal-content {
        max-width: 95%;
        margin: var(--spacing-md);
    }
    
    .ciclo-info-grid {
        grid-template-columns: 1fr;
    }
    
    .modal-actions {
        flex-direction: column;
    }
}

.area-link {
    color: var(--color-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
}

.area-link:hover {
    color: var(--color-secondary-dark);
    text-decoration: underline;
}

.summary-objetivo {
    background: linear-gradient(135deg, #e3f2fd 0%, #f4f6f8 100%);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius);
    border-left: 4px solid var(--color-primary);
}

.objetivo-label {
    font-size: 1.1rem;
    color: var(--color-primary);
    margin: 0 0 var(--spacing-sm) 0;
    font-weight: 600;
}

.objetivo-content {
    font-size: 1rem;
    line-height: 1.7;
    color: var(--color-text);
    margin: 0;
}

/* Secciones después de la card */
.video-portada-section {
    margin: var(--spacing-xl) 0;
}

.video-portada-section h2 {
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
}

.resumen-section {
    margin: var(--spacing-lg) 0;
    padding: var(--spacing-lg);
    background: var(--color-bg-alt);
    border-radius: var(--border-radius);
    border-left: 4px solid var(--color-accent);
}

.resumen-section .lead {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--color-text);
    margin: 0;
}

@media (max-width: 992px) {
    .summary-content {
        grid-template-columns: 1fr;
    }
    
    .summary-left {
        padding: var(--spacing-md);
    }
    
    .summary-image,
    .summary-placeholder {
        height: 240px;
    }
    
    .summary-title {
        font-size: 1.6rem;
    }
    
    .summary-specs {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 576px) {
    .summary-right {
        padding: var(--spacing-lg);
    }
    
    .summary-title {
        font-size: 1.4rem;
    }
    
    .summary-image,
    .summary-placeholder {
        height: 200px;
    }
}

.learning-overview {
    background: linear-gradient(135deg, #f4f6f8 0%, #e8eaf0 100%);
    border-left: 4px solid var(--color-primary);
    padding: var(--spacing-xl);
    margin: var(--spacing-xl) 0;
    border-radius: var(--border-radius);
}

.resumen .lead {
    font-size: 1.1rem;
    color: var(--color-text);
    line-height: 1.7;
    margin-bottom: var(--spacing-lg);
}

.objetivo-destacado {
    background: white;
    padding: var(--spacing-xl);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    margin-top: var(--spacing-lg);
}

.objetivo-title {
    font-size: 1.5rem;
    color: var(--color-primary);
    margin-bottom: var(--spacing-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.objetivo-text {
    font-size: 1.05rem;
    line-height: 1.8;
    color: var(--color-text);
}

.safety-info {
    background: #fff3cd;
    border: 2px solid #ffc107;
    border-left: 6px solid var(--color-warning);
    padding: var(--spacing-xl);
    margin: var(--spacing-xl) 0;
    border-radius: var(--border-radius);
}

.safety-title {
    color: #f57f17;
    margin-bottom: var(--spacing-md);
    font-size: 1.4rem;
}

.safety-content {
    color: var(--color-text);
}

.edad-recomendada {
    font-size: 1.05rem;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) 0;
}

.safety-notes {
    background: white;
    padding: var(--spacing-md);
    border-radius: var(--border-radius-sm);
    border-left: 3px solid var(--color-warning);
    line-height: 1.7;
}

.article-areas {
    margin: var(--spacing-md) 0;
    font-size: 0.95rem;
    color: var(--color-text-light);
}

.area-tag {
    color: var(--color-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
}

.area-tag:hover {
    color: var(--color-secondary-dark);
    text-decoration: underline;
}

.article-byline {
    margin: var(--spacing-md) 0;
    padding: var(--spacing-md) 0;
    border-top: 1px solid var(--color-border-light);
    border-bottom: 1px solid var(--color-border-light);
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-lg);
    font-size: 0.9rem;
    color: var(--color-text-light);
}

.article-byline .author,
.article-byline .date,
.article-byline .updated {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.kits-section {
    margin: var(--spacing-xl) 0;
    padding: var(--spacing-xl);
    background: var(--color-bg-alt);
    border-radius: var(--border-radius);
}

.kit-card {
    background: white;
    padding: var(--spacing-xl);
    margin-bottom: var(--spacing-lg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    border-left: 4px solid var(--color-primary);
}

.kit-header h3 {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    margin-bottom: var(--spacing-sm);
}

.kit-codigo {
    color: var(--color-text-light);
    font-size: 0.9rem;
    margin: var(--spacing-sm) 0;
}

.kit-card h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
    font-size: 1.1rem;
}

.materials-list {
    list-style: none;
    padding: 0;
}

.materials-list li {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    background: var(--color-bg-light);
    border-radius: var(--border-radius-sm);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.material-name {
    font-weight: 500;
    color: var(--color-text);
}

.material-notes {
    color: var(--color-text-muted);
    font-style: italic;
    display: block;
    width: 100%;
    margin-top: var(--spacing-xs);
}

.badge-success {
    background: var(--color-success);
    color: white;
}

.competencias-section {
    margin: var(--spacing-xl) 0;
    padding: var(--spacing-xl);
    background: linear-gradient(to right, #e3f2fd 0%, #f4f6f8 100%);
    border-radius: var(--border-radius);
}

.competencias-intro {
    color: var(--color-text-light);
    margin-bottom: var(--spacing-lg);
    font-size: 0.95rem;
}

.competencias-accordion {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.competencia-item {
    background: white;
    border-radius: var(--border-radius-sm);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--color-border-light);
}

.competencia-header {
    width: 100%;
    padding: var(--spacing-lg);
    background: white;
    border: none;
    cursor: pointer;
    text-align: left;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-md);
    transition: background 0.2s;
    font-family: var(--font-body);
}

.competencia-header:hover {
    background: var(--color-bg-light);
}

.competencia-title {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    flex: 1;
}

.competencia-codigo {
    color: var(--color-primary);
    font-weight: 600;
    font-size: 0.9rem;
}

.competencia-nombre {
    color: var(--color-text);
    line-height: 1.5;
    font-size: 1rem;
}

.toggle-icon {
    color: var(--color-primary);
    font-size: 0.8rem;
    transition: transform 0.3s;
    flex-shrink: 0;
}

.competencia-content {
    padding: 0 var(--spacing-lg) var(--spacing-lg);
    background: var(--color-bg-light);
    border-top: 1px solid var(--color-border-light);
}

.competencia-subcategoria {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm);
    background: white;
    border-radius: var(--border-radius-sm);
    font-size: 0.9rem;
    color: var(--color-text);
}

.competencia-subcategoria strong {
    color: var(--color-primary);
}

.competencia-explicacion {
    color: var(--color-text-light);
    line-height: 1.7;
    font-size: 0.95rem;
    margin: 0;
}

.tags-section {
    margin: var(--spacing-xl) 0;
    padding: var(--spacing-lg) 0;
    border-top: 1px solid var(--color-border-light);
}

.tags-section h3 {
    font-size: 1.1rem;
    margin-bottom: var(--spacing-md);
    color: var(--color-text);
}

.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}

.tag-pill {
    background: var(--color-bg-light);
    color: var(--color-text);
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: 20px;
    text-decoration: none;
    font-size: 0.85rem;
    transition: all 0.2s;
    border: 1px solid var(--color-border);
}

.tag-pill:hover {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.related-classes {
    margin: var(--spacing-xl) 0;
    padding: var(--spacing-xl);
    background: var(--color-bg-alt);
    border-radius: var(--border-radius);
}

.related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-lg);
}

.related-card {
    background: white;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    text-decoration: none;
    transition: transform 0.2s, box-shadow 0.2s;
}

.related-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.related-thumbnail {
    width: 100%;
    height: 160px;
    object-fit: cover;
}

.related-info {
    padding: var(--spacing-lg);
}

.related-info h4 {
    color: var(--color-text);
    margin-bottom: var(--spacing-sm);
    font-size: 1rem;
}

.related-meta {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.related-excerpt {
    color: var(--color-text-light);
    font-size: 0.85rem;
    line-height: 1.5;
    margin: 0;
}

.media-item {
    margin-bottom: var(--spacing-lg);
}

.media-caption {
    margin-top: var(--spacing-sm);
    font-size: 0.9rem;
    color: var(--color-text-light);
    font-style: italic;
}

.no-content {
    background: var(--color-bg-alt);
    padding: var(--spacing-xl);
    border-left: 4px solid var(--color-info);
    border-radius: var(--border-radius);
    color: var(--color-text-light);
}

@media (max-width: 768px) {
    .article-byline {
        flex-direction: column;
        gap: var(--spacing-sm);
    }
    
    .related-grid {
        grid-template-columns: 1fr;
    }
    
    .kit-header h3 {
        font-size: 1.1rem;
    }
}

